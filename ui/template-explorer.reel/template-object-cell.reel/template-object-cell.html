<!DOCTYPE html>
<html>
<head>
    <title></title>
    <link rel="stylesheet" type="text/css" href="template-object-cell.css">
    <script type="text/montage-serialization">
        {
            "owner": {
                "properties": {
                    "element": {"#": "template-object-cell"},
                    "_referenceProxyElement": {"#": "TemplateObjectCell-referenceProxy"},
                    "_templateObjectElementField": {"#": "templateObjectElementField"}
                },
                "bindings": {
                    "classList.has('TemplateObjectCell--owner')": {
                        "<-": "@owner.templateObject.label == 'owner'"
                    }
                }
            },

            "icon": {
                "prototype": "matte/ui/image.reel",
                "properties": {
                    "element": {"#": "icon"}
                },
                "bindings": {
                    "src": {"<-": "@owner.templateObject.editingDocument.editor.projectController.libraryItemForModuleId(@owner.templateObject.moduleId, @owner.templateObject.exportName).icon"}
                }
            },

            "objectLabel": {
                "prototype": "montage/ui/text.reel",
                "properties": {
                    "element": {"#": "objectLabel"}
                },
                "bindings": {
                    "value": {"<-": "@owner.templateObject.label"}
                }
            },

            "templateObjectExportName": {
                "prototype": "montage/ui/text.reel",
                "properties": {
                    "element": {"#": "templateObjectExportName"}
                },
                "bindings": {
                    "value": {"<-": "@owner.templateObject.exportName"}
                }
            },

            "templateObjectTag": {
                "prototype": "montage/ui/condition.reel",
                "properties": {
                    "element": {"#": "templateObjectElementField"},
                    "removalStrategy": "hide"
                },
                "bindings": {
                    "condition": {"<-": "@owner.hasElementProperty"},
                    "classList.has('TemplateObjectElementField-label--invalid')": {"<-": "!@owner.templateObject.properties.get('element').isInTemplate"}
                }
            },

            "elementTagName": {
                "prototype": "montage/ui/text.reel",
                "properties": {
                    "element": {"#": "elementTagName"}
                },
                "bindings": {
                    "value": {"<-": "@owner.templateObject.properties.get('element').tagName || 'Drop element here'"}
                }
            },

            "elementId": {
                "prototype": "montage/ui/text.reel",
                "properties": {
                    "element": {"#": "elementId"}
                },
                "bindings": {
                    "value": {"<-": "@owner.templateObject.properties.get('element').montageId"}
                }
            },

            "bindingList": {
                "prototype": "montage/ui/repetition.reel",
                "properties": {
                    "element": {"#": "bindingList"}
                },
                "bindings": {
                    "content": {"<-": "@owner.templateObject.bindings"},
                    "targetObject": {"<-": "@owner.templateObject"}
                }
            },

            "bindingEntry": {
                "prototype": "./binding-entry.reel",
                "properties": {
                    "element": {"#": "bindingEntry"}
                },
                "bindings": {
                    "targetObject": {"<-": "@bindingList.targetObject"},
                    "binding": {"<-": "@bindingList.objectAtCurrentIteration"}
                }
            },

            "defineBindingButton": {
                "prototype": "matte/ui/button.reel",
                "properties": {
                    "element": {"#": "addButton"}
                },
                "bindings": {
                    "detail.get('targetObject')": {"<-": "@owner.templateObject"}
                }
            },

            "listenerList": {
                "prototype": "montage/ui/repetition.reel",
                "properties": {
                    "element": {"#": "listenerList"}
                },
                "bindings": {
                    "content": {"<-": "@owner.templateObject.listeners"},
                    "targetObject": {"<-": "@owner.templateObject"}
                }
            },

            "listenerEntry": {
                "prototype": "./listener-entry.reel",
                "properties": {
                    "element": {"#": "listenerEntry"}
                },
                "bindings": {
                    "targetObject": {"<-": "@listenerList.targetObject"},
                    "listenerInfo": {"<-": "@listenerList.objectAtCurrentIteration"}
                }
            },

            "addListenerButton": {
                "prototype": "matte/ui/button.reel",
                "properties": {
                    "element": {"#": "addListenerButton"}
                },
                "bindings": {
                    "detail.get('targetObject')": {"<-": "@owner.templateObject"}
                }
            },

            "bindingsCondition": {
                "prototype": "montage/ui/condition.reel",
                "properties": {
                    "element": {"#": "bindingsCondition"},
                    "removalStrategy": "hide"
                },
                "bindings": {
                    "condition": {"<-": "@owner.showBindings"}
                }
            },

            "listenersCondition": {
                "prototype": "montage/ui/condition.reel",
                "properties": {
                    "element": {"#": "listenersCondition"},
                    "removalStrategy": "hide"
                },
                "bindings": {
                    "condition": {"<-": "@owner.showListeners"}
                }
            },

            "commentCondition": {
                "prototype": "montage/ui/condition.reel",
                "properties": {
                    "element": {"#": "commentCondition"},
                    "removalStrategy": "hide"
                },
                "bindings": {
                    "condition": {"<-": "@owner.templateObject.comment"}
                }
            },

            "templateObjectComment": {
                "prototype": "montage/ui/text.reel",
                "properties": {
                    "element": {"#": "templateObjectComment"}
                },
                "bindings": {
                    "value": {"<-": "@owner.templateObject.comment"}
                }
            }

        }
    </script>
</head>
<body>

<li data-montage-id="template-object-cell" class="TemplateObjectCell">

    <header class="TemplateObjectCell-header">
        <section draggable="true" class="TemplateObjectCell-referenceProxy" data-montage-id="TemplateObjectCell-referenceProxy">
            <img data-montage-id="icon" class="TemplateObjectCell-icon" src="" draggable="false">
            <div class="TemplateObjectCell-header-flex">
                <h3 data-montage-id="objectLabel" class="TemplateObjectCell-title"></h3>
                <label data-montage-id="templateObjectExportName" class="TemplateObjectCell-exportName"></label>
            </div>
        </section>

        <div data-montage-id="commentCondition">
            <p data-montage-id="templateObjectComment" class="TemplateObjectCell-comment"></p>
        </div>
    </header>

    <section data-montage-id="templateObjectElementField" class="TemplateObjectElementField">
        <img src="/assets/icons/tag.png">
        <span class="TemplateObjectElementField-label">
            <span data-montage-id="elementTagName"></span>
            <em  data-montage-id="elementId"></em>
        </span>
    </section>

    <section class="Connection-type Connection-type--bindings" data-montage-id="bindingsCondition">
        <h2 class="Connection-type-title">Bindings</h2>
        <ul data-montage-id="bindingList" class="Connection-type-list">
            <li data-montage-id="bindingEntry"></li>
        </ul>
        <button data-montage-id="addButton" class="TemplateObjectCell-button-icon TemplateObjectCell-button--bind" draggable="true"></button>
    </section>

    <section class="Connection-type Connection-type--listeners" data-montage-id="listenersCondition">
        <h2 class="Connection-type-title">Listeners</h2>
        <ul data-montage-id="listenerList" class="Connection-type-list">
            <li data-montage-id="listenerEntry"></li>
        </ul>
        <button data-montage-id="addListenerButton" class="TemplateObjectCell-button-icon TemplateObjectCell-button--listen" draggable="true"></button>
    </section>
</li>

</body>
</html>
